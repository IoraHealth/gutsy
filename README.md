# Exampleapp Ruby Client

Exampleapp is an application that does things. This gem provides a wrapper around an HTTP Client generated from Exampleapp's JSON Schema using [heroics](https://github.com/interagent/heroics).


## Usage

Add this to your Gemfile

```
gem 'example_app_client', git: 'git@github.com:USER/REPO.git', tag: 'VERSION'
```

### Rails Setup

* Add to an initializer (e.g. `config/initializers/example_app_client.rb`)

  ```ruby
  Exampleapp.configure do |config|
    config.base_url   = "http://ExampleApp.dev"
    config.api_key    = "i-am-api-user"
    config.api_secret = "very-secret-sssshhh"
    # or OAuth access token
    # config.access_token = "SHA-goodness"
  end
  ```

### Example

```
class SomeResourceLister
  attr_accessor :client

  def initialize(access_token)
    @client = Exampleapp::V1::SomeResource.new(access_token: access_token)
  end

  def call
    response = client.list({ "start_time" => Time.now.iso8601, "end_time" => (Time.now + 7.days).iso8601 })

    if response.ok?
      response.some_resources
    else
      response.errors
    end
  end
end
```

## API

All Client and Resource API methods return an Object mirroring the JSON response of the Exampleapp API call, with the added method `ok?`, indicating whether the call was a success (`2xx`), or whether the call was invalid (`422`). Other failures will raise an `Excon::Errors::Error` such as an `Excon::Errors::HTTPStatusError`.

The methods supported by each Resource API are generated by heroics and are determined by the JSON schema. In most cases, the Resource APIs found in `lib/example_app_client` just proxy method calls to the API adapter (by default the heroics-generated API adapter).



